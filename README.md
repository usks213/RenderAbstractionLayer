# RenderAbstractionLayer

◆DirectX11,DirectX12を使った抽象化レイヤー
・インスタンスするレンダラークラスのみでDirectX11とDirectX12の切り替えが可能
・各リソースは抽象化されているため、グラフィックスAPIの違いを意識せず使用できる
・シリコンスタジオ株式会社様のインターンシップ(1ヶ月)で作成(公開は許可済み)


【作ったもの】
・DirectX11とDirectX12の抽象化レイヤーを作成
・シェーダーリフレクションを使い、インプットレイアウト、
シェーダーリソーステーブル(ルートシグネチャー)、
CBufferレイアウトなどを自動生成
・メッシュとテクスチャをプログラミング上で生成
・CBVを使ったインスタンシング描画(キューブを約1000個)
・ストラクチャードバッファの使用(ポイントライト)
・レンダーターゲットをシェーダーリソースとして使うテスト(ポストエフェクト)


【クラス】
・レンダラー
・デバイス
・コマンドリスト

・シェーダー		(インプットレイアウト、リソースバインド、ルートシグネチャー)
・マテリアル		(CBuffer,Texture,Samplear,Blend,Rasterize,ZTest)
・バッファ			(CBV,SRV,UAV)
・メッシュ			(頂点、インデックス、ボーン)
・レンダーバッファ	(頂点バッファ、インデックスバッファ)
・テクスチャ		(SRV,UAV)
・レンダーターゲット(RTV)
・デプスステンシル	(DSV)


【レンダラー部分】
・レンダラー
	デバイスとコマンドリストを保持
	コマンドキューorイミディエイトコンテキストを保持

・デバイス
	リソースの生成がメイン

・コマンドリスト
	レンダーターゲット指定コマンド
	ビューポート指定コマンド
	
	バッファバインドコマンド
	テクスチャバインドコマンド
	サンプラーバインドコマンド
	
	描画コマンド(インスタンシング可)
	
	レンダーターゲットクリアコマンド
	テクスチャコピーコマンド
	
	
【リソース部分】
　リソースはデバイスから生成できる
　全てIDで管理

・シェーダー(インプットレイアウト、リソースバインド、ルートシグネチャー)
	シェーダーリフレクションを使って、
	インプットレイアウト、バインドデータ、ルートシグネチャーを自動生成
	バインドデータはローカルとグローバルで分けてある
		現状スロット番号0~7がローカル、8以降がグローバル

・マテリアル(CBuffer,Texture,Samplear,Blend,Rasterize,ZTest)
	シェーダーのバインドデータ(ローカル)を元に、
	CBufferの自動生成、Texture,Samplerのバインドレイアウトを作成
	CBufferの変数名を元にデータ指定(Unityみたいな)

・メッシュ(頂点、インデックス、ボーン)
	可変式の頂点データを保持
・レンダーバッファ(頂点バッファ、インデックスバッファ)
	メッシュとシェーダーのインプットレイアウトを元に頂点バッファを自動生成
	↑ランタイム中にマテリアルとメッシュの組み合わせを変えれるようにするため
	
・バッファ(CBV,SRV,UAV)
	シェーダーのバインドデータ用のバッファ
	フラグでCBV,SRV,UAVを選ぶ ストラクチャードも可	

・テクスチャ(SRV,UAV)
	フラグでSRV,UAVを追加で作成

・レンダーターゲット(RTV)
	テクスチャIDを持っている
	追加でテクスチャにレンダーターゲットビューを作る
	
・デプスステンシル(DSV)
	テクスチャIDを持っている
	追加でテクスチャにデプスステンシルビューを作る


